<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<th:block th:fragment="finput_password">
    <!-- Label -->
    <label th:for="${finputName}"
           th:utext="${finputText + (finputRequired == true ? '<span class=\'text-danger\'>*</span>' : '')}">
        Label Name <span class="text-danger" th:if="${finputRequired == true}">*</span>
    </label>

    <!-- Password Input Group -->
    <div class="input-group" th:id="'id' + ${finputName}">
        <input
                th:name="${finputName}"
                th:id="${finputName}"
                th:placeholder="'Enter ' + ${finputText}"
                th:required="${finputRequired == true}"
                th:readonly="${finputReadOnly == true}"
                th:class="'form-control' + (finputClass == null ? '' : ' ' + finputClass)"
                th:type="${finputType}"
                th:field="*{__${finputName}__}"/>

        <!-- Eye icon toggle -->
        <span class="input-group-text" style="cursor:pointer;">
            <a href="javascript:void(0)" class="text-decoration-none text-dark">
                <i class="fa fa-eye-slash" aria-hidden="true"></i>
            </a>
        </span>
    </div>

    <!-- Validation Errors -->
    <ul th:if="${#fields.hasErrors(finputName)}" class="parsley-errors-list filled">
        <li class="parsley-required" th:errors="*{__${finputName}__}"></li>
    </ul>

    <!-- Password Toggle Script -->
    <script th:inline="javascript">
        $(document).ready(function () {
            const containerId = "#id" + /*[[${finputName}]]*/ '';
            const $container = $(containerId);
            const $input = $container.find('input');
            const $icon = $container.find('i');

            $container.find('a').on('click', function (event) {
                event.preventDefault();
                if ($input.attr("type") === "password") {
                    $input.attr('type', 'text');
                    $icon.removeClass("fa-eye-slash").addClass("fa-eye");
                } else {
                    $input.attr('type', 'password');
                    $icon.removeClass("fa-eye").addClass("fa-eye-slash");
                }
            });
        });
    </script>
</th:block>
</body>
</html>
